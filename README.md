# LA 교통 사고가 속도에 미치는 영향 분석
LA 교통 사고가 속도에 미치는 영향을 분석하는 VA 시스템입니다.   
대시보드는 `데이터 분석 탭`과 `교통사고 분석 탭`으로 나뉘어져 있습니다.   
데이터 분석 탭에서는 전체 교통사고에 대한 속도 분석을 확인할 수 있습니다.   
교통사고 분석 탭에서는 사용자가 선택한 교통사고에 대한 속도 분석을 확인할 수 있습니다.

## 시스템 구조
```
📦 root
├─ 📂 data # 예측모델 데이터
├─ 📂 dataset # 사용된 데이터셋
├─ 📂 frontend # 프론트엔드 폴더
│ ├─ 📂 node_modules # 모듈
│ ├─ 📂 public # 정적 파일
│ ├─ 📂 src # React의 앱 구조를 구성하는 모든 파일
│ ├─ package-lock.json # 의존성 트리 및 버전
| └ㅡ package.json # 의존성 기록
|
├─ 📂 ipynb # 데이터 분석
├─ 📂 model # 예측모델 모델
├─ 📂 script # 예측모델 스크립트
├─ .env # 환경변수 파일
├─ app.py # 플라스크 실행 파일
├─ config.py # 설정 파일
├─ README.md
├─ requirements.txt
└ㅡ run_model.py # 예측모델 실행 파일
```

## 실행 방법
### 환경
운영체제: Windows 11   
Python: 3.12.x   
Node.js: 20.x 

해당 명령어로 파일을 다운로드합니다.
```
git clone -b develop https://github.com/NamYunje2002/la-traffic-analysis.git
```

### 백엔드(플라스크) 설정 및 실행

(1) 터미널을 열고, 새로운 가상환경을 생성한 후 활성화합니다.
```
python -m venv venv
.\venv\scripts\activate
```

(2) 실행에 필요한 패키지를 설치합니다.
```
pip install -r requirements.txt
```

(3) 구글 맵 API 사용을 위해 `.env` 파일의 GOOGLE_MAPS_API_KEY에 API 키를 추가합니다.
```
GOOGLE_MAPS_API_KEY = api_key

(생략)
```

(4) 플라스크를 실행합니다.
- 일반 실행
```
python app.py
```
- 개발 서버 실행
```
flask --debug run
```

### 프론트엔드(리액트) 설정 및 실행
(1) [Node.js](https://nodejs.org/en/download/prebuilt-installer)를 설치합니다.   
(2) 새로운 터미널을 연 뒤, 가상환경을 활성화 하고 `frontend` 디렉토리로 이동합니다.
```
.\venv\scripts\activate
cd frontend
```
(3) 필요한 모듈을 설치하고 버전 호환성 문제를 해결합니다.
```
npm uninstall date-fns
npm install date-fns@^2.30.0
```
(4) 리액트를 실행합니다.
```
npm start
````
(5) http://localhost:3000 에서 대시보드를 확인할 수 있습니다.

※ 반드시 플라스크를 실행한 상태에서 리액트를 실행해야 합니다.

## 평가 기준

### - 데이터 분석 통찰력
전체 데이터에 대한 산점도와 히스토그램을 통해 교통사고 발생 전후의 속도 차이를 직관적으로 분석할 수 있습니다. 사용자는 각 사고의 전후 속도를 시각적으로 확인하면서 교통사고가 교통 흐름에 미치는 영향을 명확히 파악할 수 있습니다. 또한, 예측된 데이터를 확인함으로써 실제 교통사고의 영향을 예측할 수 있습니다. 데이터 필터링 및 분석 버튼을 통해 사용자 맞춤형 분석이 가능해 개인화된 인사이트를 제공합니다.

### - 시각화 도구의 정보 전달력
시각화 도구로 산점도, 히스토그램, 선 그래프를 사용했습니다.   
산점도는 교통사고 발생 전후의 속도 차이를 한눈에 볼 수 있게 해줍니다. 마우스를 오버하면 해당 교통사고의 발생 전후 속도를 확인할 수 있습니다.   
히스토그램을 통해서는 교통사고의 속도 변화 분포를 분석할 수 있습니다. 마우스를 오버하면 속도 범위에 해당되는 교통사고 건수를 실제 데이터, 예측 데이터 각각 확인할 수 있습니다.   
교통사고 위치를 기반으로 한 맵 시각화와 슬라이더를 활용하여 분석 범위를 유동적으로 설정할 수 있어 정보 전달력이 높습니다. 사용자 인터페이스가 직관적이고 쉽게 데이터를 이해할 수 있도록 구성되어 있습니다.
속도에 따라 색이 다른 Circle로 시각화함으로써 시간이 변화함에 따라 해당 구역의 교통 속도가 어떤 식으로 변화하는지 한눈에 보기 쉽습니다. 또한, 선 그래프를 통해서 해당 속도의 변화 및 수치를 정확하게 확인할 수 있습니다.

### - 예측 모델의 성능
테스트를 하게 되면 MSE: 0.462715, MAE: 9.984787, RMSE: 11.267738, WMAPE: 0.166928 값이 도출됩니다. 평균 제곱 오차(MSE)는 0.46 수준으로 예측값과 실제값 간의 차이를 제곱한 값의 평균입니다. 평균 절대 오차(MAE)는 10 수준으로 예측값과 실제값 간의 절대 차이 평균으로 데이터와 동일한 단위를 사용합니다.   
가중 평균 절대 백분율 오차인 (WMAPE)의 값은 0.16수준으로 예측값과 실제값이 평균적으로 16% 차이가 남을 알 수 있습니다.   
예측 모델의 성능을 높이기 위해선 더 많은 데이터 셋과 여러 번의 epoch과정을 통해 높일 수 있습니다.

### - 시스템의 확장성
시스템은 사용자가 선택한 특정 교통사고 데이터를 분석하고 이를 기반으로 5km 반경 내의 속도 데이터를 분석하는 기능을 제공합니다. 반경 같은 경우 사용자로부터 입력 받은 반경 내의 속도 데이터를 분석하는 식으로 확장할 수 있습니다. 향후 다른 데이터 범위나 교차 분석 기능을 추가할 수 있는 확장성을 내포하고 있습니다. 다양한 지역에서의 교통사고 데이터를 통합하여 분석하거나 추가적인 변수와 교통사고를 연계하여 더 정교한 분석 시스템을 만들 수 있습니다. 또한, 시스템 내의 분석 기능을 강화하여 실시간 교통 데이터나 다양한 교통 사고 유형을 분석하는 기능을 추가할 수 있습니다. 

### - 프로젝트 결과물의 실용성
사용자 맞춤형 데이터 분석과 예측 기능을 제공하여 교통사고가 발생한 이후의 상황을 모니터링할 수 있습니다. 교통사고 발생 지역 및 시간대에 따른 속도 변화를 분석함으로써 실제 교통 관리 시스템에 실용적인 정보를 제공할 수 있습니다. 이는 교통사고 예방과 교통 흐름 개선에 기여할 수 있습니다.

### - 정책 결정에 대한 기여도
교통사고 발생 전, 후 속도 변화와 그 영향 범위를 명확하게 시각화하여 정책 결정자에게 교통사고의 교통 흐름에 대한 영향에 관한 시각적 정보를 제공합니다. 또한, 지정 위치의 실제 데이터와 예측 데이터를 비교하여 향후 사고 발생 시 교통 흐름 개선을 위한 정책을 미리 준비할 수 있도록 돕습니다. 이러한 분석 결과는 교통사고 발생 후 교차로 관리, 사고 예방 정책, 신호 체계 개선 등과 같은 다양한 분야에서 정책 결정을 내리는 데 중요한 참고자료로 활용될 수 있습니다.
